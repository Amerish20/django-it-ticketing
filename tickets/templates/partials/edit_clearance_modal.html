<form method="post" id="editApplicationForm">
    {% csrf_token %}
    
    <div class="modal-header bg-success text-white">
        <h5 class="modal-title"><i class="fas fa-user-check"></i> Edit Clearance Application - {{ application.application_id }}</h5>
        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div id="error-message" class="alert alert-danger d-none"></div>

        <div class="form-group">
            <label for="clearance_type">Type of Clearance</label>
            <select class="form-control" id="clearance_type" name="clearance_type" data-must-required="1" required>
                {% for lt in leave_types %}
                    <option value="{{ lt.id }}" {% if application.leave_type_id == lt.id %}selected{% endif %}>
                        {{ lt.name }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="last_working_date">Last Working Date</label>
            <input type="date" name="last_working_date" id="last_working_date" class="form-control" value="{{ application.last_working_date_display }}" onclick="this.showPicker()" data-must-required="1" required>
        </div>

        <div class="form-group">
            <label for="departure_date">Departure Date</label>
            <input type="date" name="departure_date" id="departure_date" class="form-control" value="{{ application.departure_date_display }}" onclick="this.showPicker()" data-must-required="1" required>
        </div>

        <div class="form-group">
            <label for="remarks">Remarks</label>
            <textarea name="remarks" class="form-control" data-must-required="1" required>{{ application.remarks }}</textarea>
        </div>
        <input type="hidden" name="application_id" value="{{ application.id }}">
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-success" id="editSave">Save Changes</button>
    </div>
</form>
